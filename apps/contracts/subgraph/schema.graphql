type Track @entity {
  id: ID!
  title: String!
  artist: String!
  artistAddress: Bytes!
  ipfsHash: String!
  genre: String
  duration: BigInt
  fileSize: BigInt
  metadataHash: String
  isActive: Boolean!
  playCount: BigInt!
  createdAt: BigInt!
  updatedAt: BigInt!
}

type Artist @entity {
  id: ID!
  walletAddress: Bytes!
  name: String!
  bio: String
  profileImageHash: String
  isVerified: Boolean!
  totalTracks: BigInt!
  totalEarnings: BigInt!
  createdAt: BigInt!
  updatedAt: BigInt!
}

type Playlist @entity {
  id: ID!
  userId: Bytes!
  name: String!
  description: String
  isPublic: Boolean!
  ipfsHash: String
  trackCount: BigInt!
  createdAt: BigInt!
  updatedAt: BigInt!
}

type License @entity {
  id: ID!
  trackId: BigInt!
  licenseeAddress: Bytes!
  licenseType: String!
  fee: BigInt!
  issuedAt: BigInt!
  expiresAt: BigInt
  isActive: Boolean!
  purpose: String
  createdAt: BigInt!
}

type NFT @entity {
  id: ID!
  trackId: BigInt!
  tokenId: String!
  contractAddress: Bytes!
  ownerAddress: Bytes!
  price: BigInt
  isListed: Boolean!
  createdAt: BigInt!
  updatedAt: BigInt!
}

type GovernanceProposal @entity {
  id: ID!
  proposalId: BigInt!
  proposerAddress: Bytes!
  proposalType: String!
  title: String!
  description: String!
  votesFor: BigInt!
  votesAgainst: BigInt!
  startTime: BigInt!
  endTime: BigInt!
  status: String!
  createdAt: BigInt!
}

type UserVote @entity {
  id: ID!
  proposalId: BigInt!
  voterAddress: Bytes!
  voteWeight: BigInt!
  support: Boolean!
  reason: String
  createdAt: BigInt!
}

type Analytics @entity {
  id: ID!
  trackId: BigInt!
  eventType: String!
  userAddress: Bytes
  timestamp: BigInt!
  metadata: String
}

type Revenue @entity {
  id: ID!
  trackId: BigInt!
  amount: BigInt!
  currency: String!
  source: String!
  recipientAddress: Bytes!
  transactionHash: String
  createdAt: BigInt!
}

type _Schema
  @fulltext(
    name: "trackSearch"
    language: en
    algorithm: rank
    include: [
      {
        entity: "Track"
        fields: [
          { name: "title" }
          { name: "artist" }
          { name: "genre" }
        ]
      }
    ]
  )
